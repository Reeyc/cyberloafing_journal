<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Generator | Cyberloafing Journal</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="shortcut icon" type="image/x-icon" href="/blog/assets/img/logo.png">
    <meta name="description" content="网络闲散日志">
    
    <link rel="preload" href="/blog/assets/css/0.styles.4d6f7a1c.css" as="style"><link rel="preload" href="/blog/assets/js/app.685e9e67.js" as="script"><link rel="preload" href="/blog/assets/js/2.ea4cc169.js" as="script"><link rel="preload" href="/blog/assets/js/1.ef8e2f7a.js" as="script"><link rel="preload" href="/blog/assets/js/55.5392b9d2.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.3fead202.js"><link rel="prefetch" href="/blog/assets/js/100.b738385f.js"><link rel="prefetch" href="/blog/assets/js/101.928f0605.js"><link rel="prefetch" href="/blog/assets/js/102.3765bf86.js"><link rel="prefetch" href="/blog/assets/js/103.424e3c76.js"><link rel="prefetch" href="/blog/assets/js/104.939abbd1.js"><link rel="prefetch" href="/blog/assets/js/105.9c64ba24.js"><link rel="prefetch" href="/blog/assets/js/106.b5cb1daf.js"><link rel="prefetch" href="/blog/assets/js/107.b4df2922.js"><link rel="prefetch" href="/blog/assets/js/108.5ecf8fe3.js"><link rel="prefetch" href="/blog/assets/js/109.40b1fd86.js"><link rel="prefetch" href="/blog/assets/js/11.20af3567.js"><link rel="prefetch" href="/blog/assets/js/110.452355b1.js"><link rel="prefetch" href="/blog/assets/js/111.7aae8dab.js"><link rel="prefetch" href="/blog/assets/js/112.49159006.js"><link rel="prefetch" href="/blog/assets/js/113.c5ce0594.js"><link rel="prefetch" href="/blog/assets/js/114.a652d929.js"><link rel="prefetch" href="/blog/assets/js/115.4976686d.js"><link rel="prefetch" href="/blog/assets/js/116.777d0aa3.js"><link rel="prefetch" href="/blog/assets/js/117.3c87590d.js"><link rel="prefetch" href="/blog/assets/js/118.56d07abf.js"><link rel="prefetch" href="/blog/assets/js/119.0dd36497.js"><link rel="prefetch" href="/blog/assets/js/12.542d78ea.js"><link rel="prefetch" href="/blog/assets/js/120.a88a20c6.js"><link rel="prefetch" href="/blog/assets/js/121.c67e0805.js"><link rel="prefetch" href="/blog/assets/js/122.a6920b7c.js"><link rel="prefetch" href="/blog/assets/js/123.612cfe66.js"><link rel="prefetch" href="/blog/assets/js/124.e08f9c18.js"><link rel="prefetch" href="/blog/assets/js/125.1d429d55.js"><link rel="prefetch" href="/blog/assets/js/126.857de57d.js"><link rel="prefetch" href="/blog/assets/js/127.066958fe.js"><link rel="prefetch" href="/blog/assets/js/128.efe2696f.js"><link rel="prefetch" href="/blog/assets/js/129.61ff4c5b.js"><link rel="prefetch" href="/blog/assets/js/13.76f5d807.js"><link rel="prefetch" href="/blog/assets/js/130.bde36a7e.js"><link rel="prefetch" href="/blog/assets/js/131.6fc0fea0.js"><link rel="prefetch" href="/blog/assets/js/132.50557ef5.js"><link rel="prefetch" href="/blog/assets/js/133.8e35ed84.js"><link rel="prefetch" href="/blog/assets/js/134.50b5c1b8.js"><link rel="prefetch" href="/blog/assets/js/135.84b89138.js"><link rel="prefetch" href="/blog/assets/js/136.cddcf7bf.js"><link rel="prefetch" href="/blog/assets/js/137.9c26d34c.js"><link rel="prefetch" href="/blog/assets/js/138.4bd806a2.js"><link rel="prefetch" href="/blog/assets/js/139.bb15552a.js"><link rel="prefetch" href="/blog/assets/js/14.a3469a2e.js"><link rel="prefetch" href="/blog/assets/js/140.e56c1ead.js"><link rel="prefetch" href="/blog/assets/js/141.b30720ab.js"><link rel="prefetch" href="/blog/assets/js/142.7502aaf9.js"><link rel="prefetch" href="/blog/assets/js/143.ef936dc6.js"><link rel="prefetch" href="/blog/assets/js/144.04062042.js"><link rel="prefetch" href="/blog/assets/js/145.1b48876e.js"><link rel="prefetch" href="/blog/assets/js/146.75a5b625.js"><link rel="prefetch" href="/blog/assets/js/147.3540b016.js"><link rel="prefetch" href="/blog/assets/js/148.fe895a0a.js"><link rel="prefetch" href="/blog/assets/js/15.780931f6.js"><link rel="prefetch" href="/blog/assets/js/16.d3572e03.js"><link rel="prefetch" href="/blog/assets/js/17.22c79afe.js"><link rel="prefetch" href="/blog/assets/js/18.e2bda6f4.js"><link rel="prefetch" href="/blog/assets/js/19.22191b5e.js"><link rel="prefetch" href="/blog/assets/js/20.83b5abe7.js"><link rel="prefetch" href="/blog/assets/js/21.3a1e1f2b.js"><link rel="prefetch" href="/blog/assets/js/22.d5d21c70.js"><link rel="prefetch" href="/blog/assets/js/23.1cb89f02.js"><link rel="prefetch" href="/blog/assets/js/24.b6ff7873.js"><link rel="prefetch" href="/blog/assets/js/25.77e783a3.js"><link rel="prefetch" href="/blog/assets/js/26.ecdf9a96.js"><link rel="prefetch" href="/blog/assets/js/27.05bd8c59.js"><link rel="prefetch" href="/blog/assets/js/28.e9b22090.js"><link rel="prefetch" href="/blog/assets/js/29.69931445.js"><link rel="prefetch" href="/blog/assets/js/3.295ef17d.js"><link rel="prefetch" href="/blog/assets/js/30.6a7ec01e.js"><link rel="prefetch" href="/blog/assets/js/31.60ea109c.js"><link rel="prefetch" href="/blog/assets/js/32.02267386.js"><link rel="prefetch" href="/blog/assets/js/33.439071f2.js"><link rel="prefetch" href="/blog/assets/js/34.bc91ecee.js"><link rel="prefetch" href="/blog/assets/js/35.1b5cab8f.js"><link rel="prefetch" href="/blog/assets/js/36.82f4e678.js"><link rel="prefetch" href="/blog/assets/js/37.6ef9fb6b.js"><link rel="prefetch" href="/blog/assets/js/38.3f280ebc.js"><link rel="prefetch" href="/blog/assets/js/39.764eaf13.js"><link rel="prefetch" href="/blog/assets/js/4.3d7aea99.js"><link rel="prefetch" href="/blog/assets/js/40.66955bc9.js"><link rel="prefetch" href="/blog/assets/js/41.9051478d.js"><link rel="prefetch" href="/blog/assets/js/42.cfc2ab5e.js"><link rel="prefetch" href="/blog/assets/js/43.a072f49a.js"><link rel="prefetch" href="/blog/assets/js/44.167f849e.js"><link rel="prefetch" href="/blog/assets/js/45.1c2e44cc.js"><link rel="prefetch" href="/blog/assets/js/46.6f9e740e.js"><link rel="prefetch" href="/blog/assets/js/47.4e5b090f.js"><link rel="prefetch" href="/blog/assets/js/48.39bbe60c.js"><link rel="prefetch" href="/blog/assets/js/49.30e45b5e.js"><link rel="prefetch" href="/blog/assets/js/5.0ce5c4e2.js"><link rel="prefetch" href="/blog/assets/js/50.c80b31ac.js"><link rel="prefetch" href="/blog/assets/js/51.23999b13.js"><link rel="prefetch" href="/blog/assets/js/52.ec74d061.js"><link rel="prefetch" href="/blog/assets/js/53.9da5e60d.js"><link rel="prefetch" href="/blog/assets/js/54.62ce711f.js"><link rel="prefetch" href="/blog/assets/js/56.6eb19339.js"><link rel="prefetch" href="/blog/assets/js/57.007f8227.js"><link rel="prefetch" href="/blog/assets/js/58.eda46e09.js"><link rel="prefetch" href="/blog/assets/js/59.d0ea3bee.js"><link rel="prefetch" href="/blog/assets/js/6.ce6a3882.js"><link rel="prefetch" href="/blog/assets/js/60.a20990ac.js"><link rel="prefetch" href="/blog/assets/js/61.8eee472b.js"><link rel="prefetch" href="/blog/assets/js/62.ca10e17b.js"><link rel="prefetch" href="/blog/assets/js/63.5269760f.js"><link rel="prefetch" href="/blog/assets/js/64.8a173884.js"><link rel="prefetch" href="/blog/assets/js/65.1579c145.js"><link rel="prefetch" href="/blog/assets/js/66.bab24a02.js"><link rel="prefetch" href="/blog/assets/js/67.fcc7f968.js"><link rel="prefetch" href="/blog/assets/js/68.aad00f5d.js"><link rel="prefetch" href="/blog/assets/js/69.48fecf96.js"><link rel="prefetch" href="/blog/assets/js/7.691eaf6b.js"><link rel="prefetch" href="/blog/assets/js/70.539f7918.js"><link rel="prefetch" href="/blog/assets/js/71.1e6f40c5.js"><link rel="prefetch" href="/blog/assets/js/72.100a9f4f.js"><link rel="prefetch" href="/blog/assets/js/73.30d88176.js"><link rel="prefetch" href="/blog/assets/js/74.2732a33d.js"><link rel="prefetch" href="/blog/assets/js/75.190f9f2c.js"><link rel="prefetch" href="/blog/assets/js/76.6f93a54a.js"><link rel="prefetch" href="/blog/assets/js/77.3f9ad2c4.js"><link rel="prefetch" href="/blog/assets/js/78.9d97211b.js"><link rel="prefetch" href="/blog/assets/js/79.0e2a8ba5.js"><link rel="prefetch" href="/blog/assets/js/80.c89f8dc2.js"><link rel="prefetch" href="/blog/assets/js/81.8d06ada9.js"><link rel="prefetch" href="/blog/assets/js/82.0c44893f.js"><link rel="prefetch" href="/blog/assets/js/83.6a892b40.js"><link rel="prefetch" href="/blog/assets/js/84.f9b9f575.js"><link rel="prefetch" href="/blog/assets/js/85.71221f4a.js"><link rel="prefetch" href="/blog/assets/js/86.2eb37cbb.js"><link rel="prefetch" href="/blog/assets/js/87.4869f90b.js"><link rel="prefetch" href="/blog/assets/js/88.b0e8c2e7.js"><link rel="prefetch" href="/blog/assets/js/89.16302274.js"><link rel="prefetch" href="/blog/assets/js/90.6f45e316.js"><link rel="prefetch" href="/blog/assets/js/91.33b33960.js"><link rel="prefetch" href="/blog/assets/js/92.ff444cba.js"><link rel="prefetch" href="/blog/assets/js/93.af6e1b99.js"><link rel="prefetch" href="/blog/assets/js/94.ff7315b6.js"><link rel="prefetch" href="/blog/assets/js/95.1b5de7ac.js"><link rel="prefetch" href="/blog/assets/js/96.c433e363.js"><link rel="prefetch" href="/blog/assets/js/97.e96c19c5.js"><link rel="prefetch" href="/blog/assets/js/98.ecd6b953.js"><link rel="prefetch" href="/blog/assets/js/99.978a4884.js"><link rel="prefetch" href="/blog/assets/js/vendors~docsearch.4577488c.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.4d6f7a1c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/assets/img/logo.png" alt="Cyberloafing Journal" class="logo"> <span class="site-name can-hide">Cyberloafing Journal</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/js/" class="nav-link">
  Javascript
</a></div><div class="nav-item"><a href="/blog/es6/" class="nav-link router-link-active">
  ES6
</a></div><div class="nav-item"><a href="/blog/jquery/" class="nav-link">
  jQuery
</a></div><div class="nav-item"><a href="/blog/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/blog/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/blog/ts/" class="nav-link">
  Typescript
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">Other</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">Other</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/other/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/blog/other/nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/blog/other/axios/" class="nav-link">
  Axios
</a></li><li class="dropdown-item"><!----> <a href="/blog/other/npm/" class="nav-link">
  Npm
</a></li><li class="dropdown-item"><!----> <a href="/blog/other/uni-app/" class="nav-link">
  Uni-App
</a></li><li class="dropdown-item"><!----> <a href="/blog/other/webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/blog/other/vite/" class="nav-link">
  Vite
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/js/" class="nav-link">
  Javascript
</a></div><div class="nav-item"><a href="/blog/es6/" class="nav-link router-link-active">
  ES6
</a></div><div class="nav-item"><a href="/blog/jquery/" class="nav-link">
  jQuery
</a></div><div class="nav-item"><a href="/blog/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/blog/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/blog/ts/" class="nav-link">
  Typescript
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">Other</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">Other</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/other/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/blog/other/nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/blog/other/axios/" class="nav-link">
  Axios
</a></li><li class="dropdown-item"><!----> <a href="/blog/other/npm/" class="nav-link">
  Npm
</a></li><li class="dropdown-item"><!----> <a href="/blog/other/uni-app/" class="nav-link">
  Uni-App
</a></li><li class="dropdown-item"><!----> <a href="/blog/other/webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/blog/other/vite/" class="nav-link">
  Vite
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>ECMAScript 6.0</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/es6/declaration.html" class="sidebar-link">块级作用域</a></li><li><a href="/blog/es6/deconstruction.html" class="sidebar-link">解构赋值</a></li><li><a href="/blog/es6/extend.html" class="sidebar-link">展开运算符</a></li><li><a href="/blog/es6/stringExtend.html" class="sidebar-link">字符串扩展</a></li><li><a href="/blog/es6/arrayExtend.html" class="sidebar-link">数组扩展</a></li><li><a href="/blog/es6/functionExtend.html" class="sidebar-link">函数扩展</a></li><li><a href="/blog/es6/objectExtend.html" class="sidebar-link">对象扩展</a></li><li><a href="/blog/es6/regExpExtend.html" class="sidebar-link">正则扩展</a></li><li><a href="/blog/es6/symbol.html" class="sidebar-link">Symbol</a></li><li><a href="/blog/es6/setMap.html" class="sidebar-link">Set &amp; Map</a></li><li><a href="/blog/es6/iterator.html" class="sidebar-link">Iterator</a></li><li><a href="/blog/es6/promise.html" class="sidebar-link">Promise</a></li><li><a href="/blog/es6/generator.html" aria-current="page" class="active sidebar-link">Generator</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/es6/generator.html#执行" class="sidebar-link">执行</a></li><li class="sidebar-sub-header"><a href="/blog/es6/generator.html#状态" class="sidebar-link">状态</a></li><li class="sidebar-sub-header"><a href="/blog/es6/generator.html#generator-prototype-next" class="sidebar-link">Generator.prototype.next</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/es6/generator.html#for-of" class="sidebar-link">for...of</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/es6/generator.html#generator-prototype-throw" class="sidebar-link">Generator.prototype.throw</a></li><li class="sidebar-sub-header"><a href="/blog/es6/generator.html#generator-prototype-return" class="sidebar-link">Generator.prototype.return</a></li><li class="sidebar-sub-header"><a href="/blog/es6/generator.html#yield" class="sidebar-link">yield*</a></li><li class="sidebar-sub-header"><a href="/blog/es6/generator.html#generator内的this" class="sidebar-link">Generator内的this</a></li></ul></li><li><a href="/blog/es6/async.html" class="sidebar-link">Async</a></li><li><a href="/blog/es6/class.html" class="sidebar-link">Class</a></li><li><a href="/blog/es6/module.html" class="sidebar-link">Module</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="generator"><a href="#generator" class="header-anchor">#</a> Generator</h1> <p>Generator函数是ES6推出的一种异步解决方案，从多个角度来理解Generator函数：</p> <ul><li><strong>状态机</strong>：函数内部封装了多个状态</li> <li><strong>迭代器生成机</strong>：函数会返回一个迭代器对象，该对象会依次遍历内部的状态</li></ul> <p>Generator在形式上就是一个普通函数，它的书写形式和普通函数大致一样，区别在于Generator函数的<code>function</code>关键字后面要加一个<code>*</code>号，而且它内部有自己专属的<code>yield</code>语句</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">yield</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> iterator <span class="token operator">=</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//指针对象 Iterator接口</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>调用Generator函数，函数并不会执行，而是返回一个<a href="/blog/es6/iterator.html">Iterator迭代器对象</a>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Genarator函数作为对象方法</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">demo</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//常规</span>
    <span class="token keyword">yield</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">*</span><span class="token function">demo2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//简写</span>
    <span class="token keyword">yield</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> it <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  it2 <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">demo2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// Genarator函数作为匿名函数</span>
<span class="token keyword">let</span> it3 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="执行"><a href="#执行" class="header-anchor">#</a> 执行</h2> <p>迭代器对象含有Generator内部所有状态，每次调用该对象的<code>next</code>方法，就会执行函数，将指针指向下一个状态，也就是执行到<code>yield</code>语句处，遇到<code>return</code>就会结束函数的执行。</p> <p>换句话说：Generator函数是分段执行的，<code>yield</code>是暂停的信号，调用<code>next</code>会继续执行，<code>return</code>是结束的信号。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">yield</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;World&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">yield</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;ES6&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Generator&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> iterator <span class="token operator">=</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'Hello'</span>
iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'World'</span>
iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'ES6'</span>
iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// return结束</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="状态"><a href="#状态" class="header-anchor">#</a> 状态</h2> <p>每一个<code>yield</code>后面的表达式的值就是当前阶段的状态，该状态保存在 <a href="/blog/es6/iterator.html">Iterator</a> 接口的信息对象的<code>value</code>属性中。<br> <code>done</code>属性则是一个Boolean值，它代表状态的遍历是否结束，<code>false</code>表示未结束，<code>true</code>表示已结束，当遇到<code>return</code>或者没有<code>return</code>且执行到最后一个<code>yield</code>时，它变为<code>true</code>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> num
  <span class="token keyword">yield</span> <span class="token punctuation">(</span>y <span class="token operator">=</span> num <span class="token operator">+</span> <span class="token number">200</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> y <span class="token operator">+</span> <span class="token number">300</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> iterator <span class="token operator">=</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: 100, done: false }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: 300, done: false }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: 600, done: true }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: undefined, done: true }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>上面的demo函数内部一共有3个状态：100、300、600，这些状态会在每次执行时，保存到信息对象的<code>value</code>属性中。</p> <hr> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li><code>yield</code>表达式如果用于另一个表达式中，需要给<code>yield</code>表达式加上括号。</li> <li><code>yield</code>表达式只能存在Generator函数中，否则会报错。</li></ul></div> <h2 id="generator-prototype-next"><a href="#generator-prototype-next" class="header-anchor">#</a> Generator.prototype.next</h2> <p>ES6规定，Generator返回的Iterator对象都是Generator函数的实例，也就是说可以使用Generator原型上的方法。</p> <p><strong>Generator.prototype.next</strong>方法用于执行函数，方法的参数可以替换掉<code>yield</code>表达式的值。</p> <p>首次调用<strong>next</strong>方法执行到第一个<code>yield</code>语句时暂停，因此第一个<code>yield</code>表达式的值是无法通过<strong>next</strong>方法来操控的。而接下来每一次调用<strong>next</strong>方法，传递的参数都会替换掉上一个<code>yield</code>的值。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>语义来上讲，首次调用 <strong>next</strong> 方法算是用于启动迭代器对象的。</p></div> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">yield</span> num<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">yield</span> <span class="token punctuation">(</span>y <span class="token operator">=</span> num <span class="token operator">+</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>x <span class="token operator">=</span> y <span class="token operator">+</span> <span class="token number">300</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> iterator <span class="token operator">=</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>

iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">555</span><span class="token punctuation">)</span>  <span class="token comment">// 第一次调用，传递的参数无效，无法改变 yield 的值</span>
iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">666</span><span class="token punctuation">)</span>  <span class="token comment">// 666</span>
iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">888</span><span class="token punctuation">)</span>  <span class="token comment">// 888</span>
iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span> <span class="token comment">// 函数执行已结束</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>上面就是个很直观的例子，每次执行函数时，都将一个新的值注入<code>yield</code>的返回值，并打印出来：</p> <ol><li>第一次调用<strong>next</strong> ，执行函数，并传递一个参数555，遇到<code>yield</code>时暂停，也就是说还未执行<code>yield</code>，所以无法替换第一个<code>yield</code>的值。</li> <li>第二次调用<strong>next</strong>，从上次<code>yield</code>处执行，并替换<code>yield</code>的值为666，打印出来666。</li> <li>第三次同理...</li></ol> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><strong>yield表达式的值</strong> 和 <strong>yield后面的表达式的值</strong> 两者不是同一个东西。</p> <ul><li><strong>yield表达式的值</strong>跟<code>next</code>的参数挂钩，如没有参数，则值为<code>undefined</code>。</li> <li><strong>yield后面的表达式的值</strong>代表的是当前阶段的状态，会被保存在Iterator的信息对象的<code>value</code>属性中。</li></ul></div> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Started&quot;</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'yield表达式的值为：'</span><span class="token punctuation">,</span> <span class="token keyword">yield</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token comment">// 100 + 200为当前阶段状态</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'yield表达式的值为：'</span><span class="token punctuation">,</span> <span class="token keyword">yield</span> <span class="token number">300</span> <span class="token operator">+</span> <span class="token number">400</span><span class="token punctuation">)</span> <span class="token comment">// 300 + 400为当前阶段状态</span>
  <span class="token keyword">return</span> <span class="token string">&quot;End&quot;</span>                                      <span class="token comment">// 'End'为当前阶段状态</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> iterator <span class="token operator">=</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'信息对象：'</span><span class="token punctuation">,</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>               <span class="token comment">// {value: 300, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'信息对象：'</span><span class="token punctuation">,</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token string">&quot;First yield&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// {value: 700, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'信息对象：'</span><span class="token punctuation">,</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token string">&quot;Second yield&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {value: &quot;End&quot;, done: true}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'信息对象：'</span><span class="token punctuation">,</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token string">&quot;Third yield&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// {value: undefined, done: true}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="for-of"><a href="#for-of" class="header-anchor">#</a> for...of</h3> <p>任意对象的<code>Symbol.iterator</code>方法，指向该对象的Iterator接口，也就是迭代器生成函数，用于生成迭代器对象。</p> <p>而Generator就是迭代器生成函数，因此在给对象部署Iterator接口的时候，可以直接给<code>Symbol.iterator</code>属性赋值Generator函数。</p> <p><code>for...of</code>遍历Generator产生的迭代器对象，会自动调用<strong>next</strong>方法，所以不需要再加上<strong>next</strong>方法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Generator函数 (生产迭代器对象)</span>
<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">createIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> Key <span class="token keyword">of</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> <span class="token punctuation">[</span>Key<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span>Key<span class="token punctuation">]</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&quot;value&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">&quot;bar&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token operator">:</span> createIterator <span class="token comment">//给对象部署Iterator接口，指向Generator函数</span>
<span class="token punctuation">}</span>

<span class="token comment">// for...of循环默认调用了next()方法执行Generator函数</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token keyword">of</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 其他循环需要手动调用next()方法来执行Generator函数</span>
<span class="token keyword">const</span> it <span class="token operator">=</span> obj<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token operator">=</span> result<span class="token punctuation">.</span>value
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
  result <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="generator-prototype-throw"><a href="#generator-prototype-throw" class="header-anchor">#</a> Generator.prototype.throw</h2> <p><strong>Generator.prototype.throw</strong>方法用于在函数外部抛出错误，在函数内外都能捕获</p> <p>必须在<code>try</code>代码块内抛出错误，在<code>catch</code>语句内捕获，如果没有<code>try/catch</code>语句，会直接报错，终止脚本。<code>catch</code>只会捕获一次错误，多出来的错误<code>catch</code>不会再执行，由下一个<code>catch</code>语句块捕获。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token comment">//Error: Catching internal errors!</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> it <span class="token operator">=</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  it<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Catching internal errors!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  it<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Catching external errors!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token comment">//Error: Catching external errors!</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>如上，迭代器对象抛出两个错误，第一个错误被Generator函数内部<code>catch</code>语句捕获，再次发生错误时，<code>catch</code>语句已经执行过了，多出来那个错误被外部<code>catch</code>语句捕获。</p> <p><code>throw</code>方法被捕获后，会附带执行下一条<code>yield</code>表达式，相当于执行一次<strong>next</strong>方法。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">yield</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;World&quot;</span><span class="token punctuation">)</span> <span class="token comment">//被执行</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> it <span class="token operator">=</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  it<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Catching internal errors!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  it<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Catching external errors!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p><strong>Generator.prototype.throw</strong>方法和全局的<code>throw</code>命令没有任何关系，后者只能被全局<code>catch</code>代码块捕获。<br>
如下代码中，data和data2都没有定义，是全局错误，只有第一条被全局的<code>catch</code>捕获。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;generator catch：&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">yield</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;World&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> it <span class="token operator">=</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  it<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
  it<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span>data2<span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;global catch：&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></div> <h2 id="generator-prototype-return"><a href="#generator-prototype-return" class="header-anchor">#</a> Generator.prototype.return</h2> <p>默认情况下，Generator函数当前的状态由<strong>yield后面表达式的值</strong>决定。<br> <strong>Generator.prototype.return</strong>方法传递的参数可以强制指定<code>value</code>的值，如不传参数将是<code>undefined</code>。<br> <strong>return</strong>方法还会终止Generator函数的循环，相当于执行了<strong>return</strong>语句</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token string">&quot;One&quot;</span>
  <span class="token keyword">yield</span> <span class="token string">&quot;Two&quot;</span>
  <span class="token keyword">yield</span> <span class="token string">&quot;Three&quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> it <span class="token operator">=</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token comment">// {value: One, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">return</span><span class="token punctuation">(</span><span class="token number">999</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {value: 999, done: true}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token comment">// {value: undefined, done: true}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>上述代码中，第二次循环，信息对象的值应该是<code>{value: Two, done: false}</code>，<strong>return</strong>方法强制将其指定为999，并且结束循环，也就相当于执行了一次<strong>return</strong>语句。</p> <h2 id="yield"><a href="#yield" class="header-anchor">#</a> yield*</h2> <p><code>yield*</code>表达式可以在Generator函数内执行另一个Generator函数。</p> <p>Generator函数当前的状态由<strong>yield后面表达式的值</strong>决定，即使表达式的值是另一个Generator函数产生的迭代器对象，也是如此。如果想要保存的是另一个迭代器对象的内部值，就要用到<code>yield*</code>表达式，表示该值是一个迭代器对象，将其内部值保存。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token string">&quot;World&quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token string">&quot;Hello&quot;</span>
  <span class="token keyword">yield</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//迭代器对象</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">of</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// ==============================</span>

<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token string">&quot;World&quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">d</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token string">&quot;Hello&quot;</span>
  <span class="token keyword">yield</span><span class="token operator">*</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//World</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">of</span> <span class="token function">d</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>它的实现原理也就是<code>for...of</code>遍历了<code>yield*</code>后面的迭代器对象，可以得出，如果遍历<code>yield*</code>所在的Generator，就相当于一次性遍历了多个Generator函数。如下代码中，b1和b2的处理方式其实是一样的。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token string">&quot;World&quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">b1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token string">&quot;Hello&quot;</span>
  <span class="token keyword">yield</span><span class="token operator">*</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">b2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token string">&quot;Hello&quot;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">of</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> key
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>如果被代理的迭代器对象内有<strong>return</strong>语句，此时用<code>for...of</code>遍历无法获取到<strong>return</strong>后的值，因为<code>for...of</code>在遇到<strong>return</strong>时，已经将<code>done</code>变为<code>true</code>，所以不会遍历到<strong>return</strong>的值。</p> <p>解决方案就是用<code>yield</code>表达式的值来获取：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token number">200</span>
  <span class="token keyword">yield</span> <span class="token number">300</span> <span class="token operator">+</span> <span class="token number">400</span>
  <span class="token keyword">return</span> <span class="token string">&quot;End&quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token number">900</span>
  <span class="token keyword">let</span> returnValue <span class="token operator">=</span> <span class="token keyword">yield</span><span class="token operator">*</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">yield</span> returnValue
  <span class="token keyword">yield</span> <span class="token number">300</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">of</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token comment">//900,300,700,End,300</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></div> <p>在<code>yield*</code>后面原生具有Iterator接口的数据，都会被<code>for...of</code>所遍历。例如：数组、字符串等等</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span><span class="token operator">*</span> <span class="token string">&quot;abcd&quot;</span>
  <span class="token keyword">yield</span><span class="token operator">*</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> it <span class="token operator">=</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">of</span> it<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token comment">//a,b,c,d,10,20,30</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>yield*的应用</strong>：<code>yield*</code> + <code>递归</code>使数组扁平化</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">arrayFlat</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//元素具有Iterator接口</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> element<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">yield</span><span class="token operator">*</span> <span class="token function">arrayFlat</span><span class="token punctuation">(</span>element<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> element
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> testArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">400</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span>

<span class="token comment">// =============== 结果测试 ===============</span>
<span class="token comment">// for...of</span>
<span class="token keyword">let</span> iterator <span class="token operator">=</span> <span class="token function">arrayFlat</span><span class="token punctuation">(</span>testArray<span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">of</span> iterator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token comment">//100,200,300,400</span>
<span class="token punctuation">}</span>

<span class="token comment">// 其他循环</span>
<span class="token keyword">let</span> iterator2 <span class="token operator">=</span> <span class="token function">arrayFlat</span><span class="token punctuation">(</span>testArray<span class="token punctuation">)</span>
<span class="token keyword">let</span> info <span class="token operator">=</span> iterator2<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>info<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">//100,200,300,400</span>
  info <span class="token operator">=</span> iterator2<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// =============== End ==============</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token function">arrayFlat</span><span class="token punctuation">(</span>testArray<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h2 id="generator内的this"><a href="#generator内的this" class="header-anchor">#</a> Generator内的this</h2> <p>Generator返回的遍历器对象可以继承<strong>Generator.prototype</strong>属性上的方法。</p> <p>但是Generator函数和普通的构造函数有区别：不能使用<strong>New</strong>关键字来调用Generator函数，因为Generator函数返回的是遍历器对象，而不是<code>this</code>，换句话说，Generator函数内部的<code>this</code>默认情况下不可用。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token string">&quot;World&quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> it <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//Uncaught TypeError: A is not a constructor</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>可以自定义一个构造函数（解决<code>New</code>关键字问题），函数内部调用Generator函数，并改变Generator函数内部<code>this</code>指向为自己的原型对象（解决内部<code>this</code>问题）</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">demo</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>demo<span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> arg<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> a<span class="token punctuation">)</span>
  <span class="token keyword">yield</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>b <span class="token operator">=</span> b<span class="token punctuation">)</span>
  <span class="token keyword">yield</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>c <span class="token operator">=</span> c<span class="token punctuation">)</span>
  <span class="token keyword">return</span> c
<span class="token punctuation">}</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Constructor</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">of</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token comment">//100,200,300</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>a<span class="token punctuation">,</span> obj<span class="token punctuation">.</span>b<span class="token punctuation">,</span> obj<span class="token punctuation">.</span>c<span class="token punctuation">)</span> <span class="token comment">//100,200,300</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><!----></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/es6/promise.html" class="prev">
        Promise
      </a></span> <span class="next"><a href="/blog/es6/async.html">
        Async
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/blog/assets/js/app.685e9e67.js" defer></script><script src="/blog/assets/js/2.ea4cc169.js" defer></script><script src="/blog/assets/js/1.ef8e2f7a.js" defer></script><script src="/blog/assets/js/55.5392b9d2.js" defer></script>
  </body>
</html>
