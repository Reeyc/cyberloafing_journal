<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>浏览器 | Cyberloafing Journal</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="shortcut icon" type="image/x-icon" href="/blog/assets/img/logo.png">
    <meta name="description" content="网络闲散日志">
    
    <link rel="preload" href="/blog/assets/css/0.styles.4d6f7a1c.css" as="style"><link rel="preload" href="/blog/assets/js/app.685e9e67.js" as="script"><link rel="preload" href="/blog/assets/js/2.ea4cc169.js" as="script"><link rel="preload" href="/blog/assets/js/1.ef8e2f7a.js" as="script"><link rel="preload" href="/blog/assets/js/42.cfc2ab5e.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.3fead202.js"><link rel="prefetch" href="/blog/assets/js/100.b738385f.js"><link rel="prefetch" href="/blog/assets/js/101.928f0605.js"><link rel="prefetch" href="/blog/assets/js/102.3765bf86.js"><link rel="prefetch" href="/blog/assets/js/103.424e3c76.js"><link rel="prefetch" href="/blog/assets/js/104.939abbd1.js"><link rel="prefetch" href="/blog/assets/js/105.9c64ba24.js"><link rel="prefetch" href="/blog/assets/js/106.b5cb1daf.js"><link rel="prefetch" href="/blog/assets/js/107.b4df2922.js"><link rel="prefetch" href="/blog/assets/js/108.5ecf8fe3.js"><link rel="prefetch" href="/blog/assets/js/109.40b1fd86.js"><link rel="prefetch" href="/blog/assets/js/11.20af3567.js"><link rel="prefetch" href="/blog/assets/js/110.452355b1.js"><link rel="prefetch" href="/blog/assets/js/111.7aae8dab.js"><link rel="prefetch" href="/blog/assets/js/112.49159006.js"><link rel="prefetch" href="/blog/assets/js/113.c5ce0594.js"><link rel="prefetch" href="/blog/assets/js/114.a652d929.js"><link rel="prefetch" href="/blog/assets/js/115.4976686d.js"><link rel="prefetch" href="/blog/assets/js/116.777d0aa3.js"><link rel="prefetch" href="/blog/assets/js/117.3c87590d.js"><link rel="prefetch" href="/blog/assets/js/118.56d07abf.js"><link rel="prefetch" href="/blog/assets/js/119.0dd36497.js"><link rel="prefetch" href="/blog/assets/js/12.542d78ea.js"><link rel="prefetch" href="/blog/assets/js/120.a88a20c6.js"><link rel="prefetch" href="/blog/assets/js/121.c67e0805.js"><link rel="prefetch" href="/blog/assets/js/122.a6920b7c.js"><link rel="prefetch" href="/blog/assets/js/123.612cfe66.js"><link rel="prefetch" href="/blog/assets/js/124.e08f9c18.js"><link rel="prefetch" href="/blog/assets/js/125.1d429d55.js"><link rel="prefetch" href="/blog/assets/js/126.857de57d.js"><link rel="prefetch" href="/blog/assets/js/127.066958fe.js"><link rel="prefetch" href="/blog/assets/js/128.efe2696f.js"><link rel="prefetch" href="/blog/assets/js/129.61ff4c5b.js"><link rel="prefetch" href="/blog/assets/js/13.76f5d807.js"><link rel="prefetch" href="/blog/assets/js/130.bde36a7e.js"><link rel="prefetch" href="/blog/assets/js/131.6fc0fea0.js"><link rel="prefetch" href="/blog/assets/js/132.50557ef5.js"><link rel="prefetch" href="/blog/assets/js/133.8e35ed84.js"><link rel="prefetch" href="/blog/assets/js/134.50b5c1b8.js"><link rel="prefetch" href="/blog/assets/js/135.84b89138.js"><link rel="prefetch" href="/blog/assets/js/136.cddcf7bf.js"><link rel="prefetch" href="/blog/assets/js/137.9c26d34c.js"><link rel="prefetch" href="/blog/assets/js/138.4bd806a2.js"><link rel="prefetch" href="/blog/assets/js/139.bb15552a.js"><link rel="prefetch" href="/blog/assets/js/14.a3469a2e.js"><link rel="prefetch" href="/blog/assets/js/140.e56c1ead.js"><link rel="prefetch" href="/blog/assets/js/141.b30720ab.js"><link rel="prefetch" href="/blog/assets/js/142.7502aaf9.js"><link rel="prefetch" href="/blog/assets/js/143.ef936dc6.js"><link rel="prefetch" href="/blog/assets/js/144.04062042.js"><link rel="prefetch" href="/blog/assets/js/145.1b48876e.js"><link rel="prefetch" href="/blog/assets/js/146.75a5b625.js"><link rel="prefetch" href="/blog/assets/js/147.3540b016.js"><link rel="prefetch" href="/blog/assets/js/148.fe895a0a.js"><link rel="prefetch" href="/blog/assets/js/15.780931f6.js"><link rel="prefetch" href="/blog/assets/js/16.d3572e03.js"><link rel="prefetch" href="/blog/assets/js/17.22c79afe.js"><link rel="prefetch" href="/blog/assets/js/18.e2bda6f4.js"><link rel="prefetch" href="/blog/assets/js/19.22191b5e.js"><link rel="prefetch" href="/blog/assets/js/20.83b5abe7.js"><link rel="prefetch" href="/blog/assets/js/21.3a1e1f2b.js"><link rel="prefetch" href="/blog/assets/js/22.d5d21c70.js"><link rel="prefetch" href="/blog/assets/js/23.1cb89f02.js"><link rel="prefetch" href="/blog/assets/js/24.b6ff7873.js"><link rel="prefetch" href="/blog/assets/js/25.77e783a3.js"><link rel="prefetch" href="/blog/assets/js/26.ecdf9a96.js"><link rel="prefetch" href="/blog/assets/js/27.05bd8c59.js"><link rel="prefetch" href="/blog/assets/js/28.e9b22090.js"><link rel="prefetch" href="/blog/assets/js/29.69931445.js"><link rel="prefetch" href="/blog/assets/js/3.295ef17d.js"><link rel="prefetch" href="/blog/assets/js/30.6a7ec01e.js"><link rel="prefetch" href="/blog/assets/js/31.60ea109c.js"><link rel="prefetch" href="/blog/assets/js/32.02267386.js"><link rel="prefetch" href="/blog/assets/js/33.439071f2.js"><link rel="prefetch" href="/blog/assets/js/34.bc91ecee.js"><link rel="prefetch" href="/blog/assets/js/35.1b5cab8f.js"><link rel="prefetch" href="/blog/assets/js/36.82f4e678.js"><link rel="prefetch" href="/blog/assets/js/37.6ef9fb6b.js"><link rel="prefetch" href="/blog/assets/js/38.3f280ebc.js"><link rel="prefetch" href="/blog/assets/js/39.764eaf13.js"><link rel="prefetch" href="/blog/assets/js/4.3d7aea99.js"><link rel="prefetch" href="/blog/assets/js/40.66955bc9.js"><link rel="prefetch" href="/blog/assets/js/41.9051478d.js"><link rel="prefetch" href="/blog/assets/js/43.a072f49a.js"><link rel="prefetch" href="/blog/assets/js/44.167f849e.js"><link rel="prefetch" href="/blog/assets/js/45.1c2e44cc.js"><link rel="prefetch" href="/blog/assets/js/46.6f9e740e.js"><link rel="prefetch" href="/blog/assets/js/47.4e5b090f.js"><link rel="prefetch" href="/blog/assets/js/48.39bbe60c.js"><link rel="prefetch" href="/blog/assets/js/49.30e45b5e.js"><link rel="prefetch" href="/blog/assets/js/5.0ce5c4e2.js"><link rel="prefetch" href="/blog/assets/js/50.c80b31ac.js"><link rel="prefetch" href="/blog/assets/js/51.23999b13.js"><link rel="prefetch" href="/blog/assets/js/52.ec74d061.js"><link rel="prefetch" href="/blog/assets/js/53.9da5e60d.js"><link rel="prefetch" href="/blog/assets/js/54.62ce711f.js"><link rel="prefetch" href="/blog/assets/js/55.5392b9d2.js"><link rel="prefetch" href="/blog/assets/js/56.6eb19339.js"><link rel="prefetch" href="/blog/assets/js/57.007f8227.js"><link rel="prefetch" href="/blog/assets/js/58.eda46e09.js"><link rel="prefetch" href="/blog/assets/js/59.d0ea3bee.js"><link rel="prefetch" href="/blog/assets/js/6.ce6a3882.js"><link rel="prefetch" href="/blog/assets/js/60.a20990ac.js"><link rel="prefetch" href="/blog/assets/js/61.8eee472b.js"><link rel="prefetch" href="/blog/assets/js/62.ca10e17b.js"><link rel="prefetch" href="/blog/assets/js/63.5269760f.js"><link rel="prefetch" href="/blog/assets/js/64.8a173884.js"><link rel="prefetch" href="/blog/assets/js/65.1579c145.js"><link rel="prefetch" href="/blog/assets/js/66.bab24a02.js"><link rel="prefetch" href="/blog/assets/js/67.fcc7f968.js"><link rel="prefetch" href="/blog/assets/js/68.aad00f5d.js"><link rel="prefetch" href="/blog/assets/js/69.48fecf96.js"><link rel="prefetch" href="/blog/assets/js/7.691eaf6b.js"><link rel="prefetch" href="/blog/assets/js/70.539f7918.js"><link rel="prefetch" href="/blog/assets/js/71.1e6f40c5.js"><link rel="prefetch" href="/blog/assets/js/72.100a9f4f.js"><link rel="prefetch" href="/blog/assets/js/73.30d88176.js"><link rel="prefetch" href="/blog/assets/js/74.2732a33d.js"><link rel="prefetch" href="/blog/assets/js/75.190f9f2c.js"><link rel="prefetch" href="/blog/assets/js/76.6f93a54a.js"><link rel="prefetch" href="/blog/assets/js/77.3f9ad2c4.js"><link rel="prefetch" href="/blog/assets/js/78.9d97211b.js"><link rel="prefetch" href="/blog/assets/js/79.0e2a8ba5.js"><link rel="prefetch" href="/blog/assets/js/80.c89f8dc2.js"><link rel="prefetch" href="/blog/assets/js/81.8d06ada9.js"><link rel="prefetch" href="/blog/assets/js/82.0c44893f.js"><link rel="prefetch" href="/blog/assets/js/83.6a892b40.js"><link rel="prefetch" href="/blog/assets/js/84.f9b9f575.js"><link rel="prefetch" href="/blog/assets/js/85.71221f4a.js"><link rel="prefetch" href="/blog/assets/js/86.2eb37cbb.js"><link rel="prefetch" href="/blog/assets/js/87.4869f90b.js"><link rel="prefetch" href="/blog/assets/js/88.b0e8c2e7.js"><link rel="prefetch" href="/blog/assets/js/89.16302274.js"><link rel="prefetch" href="/blog/assets/js/90.6f45e316.js"><link rel="prefetch" href="/blog/assets/js/91.33b33960.js"><link rel="prefetch" href="/blog/assets/js/92.ff444cba.js"><link rel="prefetch" href="/blog/assets/js/93.af6e1b99.js"><link rel="prefetch" href="/blog/assets/js/94.ff7315b6.js"><link rel="prefetch" href="/blog/assets/js/95.1b5de7ac.js"><link rel="prefetch" href="/blog/assets/js/96.c433e363.js"><link rel="prefetch" href="/blog/assets/js/97.e96c19c5.js"><link rel="prefetch" href="/blog/assets/js/98.ecd6b953.js"><link rel="prefetch" href="/blog/assets/js/99.978a4884.js"><link rel="prefetch" href="/blog/assets/js/vendors~docsearch.4577488c.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.4d6f7a1c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/assets/img/logo.png" alt="Cyberloafing Journal" class="logo"> <span class="site-name can-hide">Cyberloafing Journal</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/js/" class="nav-link">
  Javascript
</a></div><div class="nav-item"><a href="/blog/es6/" class="nav-link">
  ES6
</a></div><div class="nav-item"><a href="/blog/jquery/" class="nav-link">
  jQuery
</a></div><div class="nav-item"><a href="/blog/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/blog/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/blog/ts/" class="nav-link">
  Typescript
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">Other</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">Other</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/other/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/blog/other/nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/blog/other/axios/" class="nav-link">
  Axios
</a></li><li class="dropdown-item"><!----> <a href="/blog/other/npm/" class="nav-link">
  Npm
</a></li><li class="dropdown-item"><!----> <a href="/blog/other/uni-app/" class="nav-link">
  Uni-App
</a></li><li class="dropdown-item"><!----> <a href="/blog/other/webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/blog/other/vite/" class="nav-link">
  Vite
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/js/" class="nav-link">
  Javascript
</a></div><div class="nav-item"><a href="/blog/es6/" class="nav-link">
  ES6
</a></div><div class="nav-item"><a href="/blog/jquery/" class="nav-link">
  jQuery
</a></div><div class="nav-item"><a href="/blog/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/blog/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/blog/ts/" class="nav-link">
  Typescript
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">Other</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">Other</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/other/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/blog/other/nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/blog/other/axios/" class="nav-link">
  Axios
</a></li><li class="dropdown-item"><!----> <a href="/blog/other/npm/" class="nav-link">
  Npm
</a></li><li class="dropdown-item"><!----> <a href="/blog/other/uni-app/" class="nav-link">
  Uni-App
</a></li><li class="dropdown-item"><!----> <a href="/blog/other/webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/blog/other/vite/" class="nav-link">
  Vite
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>面试题</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/Interview/css.html" class="sidebar-link">CSS</a></li><li><a href="/blog/Interview/js.html" class="sidebar-link">JS</a></li><li><a href="/blog/Interview/vue.html" class="sidebar-link">Vue</a></li><li><a href="/blog/Interview/broswer.html" aria-current="page" class="active sidebar-link">浏览器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Interview/broswer.html#浏览器渲染流程" class="sidebar-link">浏览器渲染流程</a></li><li class="sidebar-sub-header"><a href="/blog/Interview/broswer.html#回流-重排-重绘" class="sidebar-link">回流（重排）&amp; 重绘</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Interview/broswer.html#触发时机" class="sidebar-link">触发时机</a></li><li class="sidebar-sub-header"><a href="/blog/Interview/broswer.html#减少触发" class="sidebar-link">减少触发</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/Interview/broswer.html#输入网址到页面显示的过程" class="sidebar-link">输入网址到页面显示的过程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Interview/broswer.html#dns解析" class="sidebar-link">DNS解析</a></li><li class="sidebar-sub-header"><a href="/blog/Interview/broswer.html#发起tcp连接" class="sidebar-link">发起TCP连接</a></li><li class="sidebar-sub-header"><a href="/blog/Interview/broswer.html#发送http请求" class="sidebar-link">发送HTTP请求</a></li><li class="sidebar-sub-header"><a href="/blog/Interview/broswer.html#服务器处理请求并返回http报文" class="sidebar-link">服务器处理请求并返回HTTP报文</a></li><li class="sidebar-sub-header"><a href="/blog/Interview/broswer.html#浏览器解析渲染页面" class="sidebar-link">浏览器解析渲染页面</a></li><li class="sidebar-sub-header"><a href="/blog/Interview/broswer.html#连接结束" class="sidebar-link">连接结束</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/Interview/broswer.html#get-post" class="sidebar-link">GET &amp; POST</a></li><li class="sidebar-sub-header"><a href="/blog/Interview/broswer.html#http缓存" class="sidebar-link">HTTP缓存</a></li><li class="sidebar-sub-header"><a href="/blog/Interview/broswer.html#常见性能优化手段" class="sidebar-link">常见性能优化手段</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Interview/broswer.html#图片" class="sidebar-link">图片</a></li><li class="sidebar-sub-header"><a href="/blog/Interview/broswer.html#css" class="sidebar-link">CSS</a></li><li class="sidebar-sub-header"><a href="/blog/Interview/broswer.html#js" class="sidebar-link">JS</a></li><li class="sidebar-sub-header"><a href="/blog/Interview/broswer.html#vue" class="sidebar-link">Vue</a></li><li class="sidebar-sub-header"><a href="/blog/Interview/broswer.html#http" class="sidebar-link">HTTP</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="浏览器"><a href="#浏览器" class="header-anchor">#</a> 浏览器</h1> <h2 id="浏览器渲染流程"><a href="#浏览器渲染流程" class="header-anchor">#</a> 浏览器渲染流程</h2> <ul><li>解析HTML，生成DOM树。</li> <li>解析CSS，生成CSSOM树。</li> <li>将DOM树和CSSOM树结合，生成渲染树(Render Tree)。</li> <li>Layout(回流)：根据生成的渲染树，进行重排，得到节点的几何信息（位置，大小）。</li> <li>Painting(重绘)：根据渲染树以及回流得到的几何信息，得到节点的绝对像素。</li> <li>Display：将像素发送给GPU，展示在页面上。</li></ul> <h2 id="回流-重排-重绘"><a href="#回流-重排-重绘" class="header-anchor">#</a> 回流（重排）&amp; 重绘</h2> <ul><li>回流：布局引擎会根据各种样式计算每个盒子在页面上的<strong>大小</strong>与<strong>位置</strong>。</li> <li>重绘：当计算好盒模型的位置、大小及其他属性后，浏览器根据每个盒子特性进行<strong>绘制</strong>。</li></ul> <h3 id="触发时机"><a href="#触发时机" class="header-anchor">#</a> 触发时机</h3> <h4 id="回流的触发"><a href="#回流的触发" class="header-anchor">#</a> 回流的触发</h4> <p>当<strong>页面的布局</strong>或者<strong>节点的几何信息</strong>（位置、大小）发生变化时，触发回流。</p> <ul><li>添加或删除可见的DOM元素。</li> <li>元素的位置发生变化。</li> <li>元素的尺寸发生变化（高度、宽度、边框大小、外边距、内边框）。</li> <li>内容发生变化。</li> <li>页面一开始渲染的时候（这避免不了）。</li> <li>浏览器的窗口尺寸变化（因为回流是根据视口的大小来计算元素的位置和大小的）。</li></ul> <h4 id="重绘的触发"><a href="#重绘的触发" class="header-anchor">#</a> 重绘的触发</h4> <p>重新<strong>绘画</strong>某个节点。</p> <ul><li>回流一定触发重绘。</li> <li>颜色改变。</li> <li>背景改变。</li> <li>阴影改变。</li></ul> <h3 id="减少触发"><a href="#减少触发" class="header-anchor">#</a> 减少触发</h3> <ul><li>避免使用<code>table</code>布局</li> <li>避免设置多层内联样式</li> <li>将动画效果应用到<code>position</code>属性为<code>absolute</code>或<code>fixed</code>的元素上</li> <li>避免使用CSS表达式，例如：<code>calc()</code></li> <li>JS通过css的<code>class</code>改变样式</li> <li>JS避免频繁操作DOM，创建一个<code>documentFragment</code>，在它上面应用所有DOM操作，最后再把它添加到文档中</li> <li>也可以先为元素设置<code>display:none</code>，操作结束后再把它显示出来（在display属性为none的元素上进行的DOM操作不会引发回流和重绘）</li></ul> <h2 id="输入网址到页面显示的过程"><a href="#输入网址到页面显示的过程" class="header-anchor">#</a> 输入网址到页面显示的过程</h2> <h3 id="dns解析"><a href="#dns解析" class="header-anchor">#</a> DNS解析</h3> <p>根据输入的网址逐级查找对应的IP，先从浏览器缓存 &gt; 系统缓存(hosts文件) &gt; 路由器缓存 &gt; DNS服务器 &gt; 根服务器。</p> <h3 id="发起tcp连接"><a href="#发起tcp连接" class="header-anchor">#</a> 发起TCP连接</h3> <h4 id="三次握手"><a href="#三次握手" class="header-anchor">#</a> 三次握手</h4> <ul><li><strong>第一次握手</strong>：客户端发送SYN包(Seq=x)到服务器，并进入<code>SYN_SEND</code>状态，等待服务器确认。</li> <li><strong>第二次握手</strong>：服务器收到SYN包，必须确认客户的SYN（ack=x+1），同时自己也发送一个SYN包（Seq=y），即SYN+ACK包，此时服务器进入<code>SYN_RECV</code>状态。</li> <li><strong>第三次握手</strong>：客户端收到服务器的SYN＋ACK包，向服务器发送确认包ACK(ack=y+1)，此包发送完毕，客户端和服务器进入<code>ESTABLISHED</code>状态，完成三次握手。</li></ul> <blockquote><p>握手过程中传送的包里不包含数据，三次握手完毕后，客户端与服务器才正式开始传送数据。</p></blockquote> <h3 id="发送http请求"><a href="#发送http请求" class="header-anchor">#</a> 发送HTTP请求</h3> <p>通过TCP协议，将HTTP请求发送到服务器指定端口。</p> <h3 id="服务器处理请求并返回http报文"><a href="#服务器处理请求并返回http报文" class="header-anchor">#</a> 服务器处理请求并返回HTTP报文</h3> <p>HTTP报文分成三段：状态码，响应报头和响应报文。</p> <h3 id="浏览器解析渲染页面"><a href="#浏览器解析渲染页面" class="header-anchor">#</a> 浏览器解析渲染页面</h3> <ul><li>解析HTML形成DOM树</li> <li>解析CSS形成CSSOM树</li> <li>合并DOM树和CSSOM树形成渲染树</li> <li>浏览器开始渲染并绘制页面</li></ul> <h3 id="连接结束"><a href="#连接结束" class="header-anchor">#</a> 连接结束</h3> <p>关闭TCP链接是一个双工的过程。</p> <h4 id="四次挥手"><a href="#四次挥手" class="header-anchor">#</a> 四次挥手</h4> <ul><li><strong>第一次挥手</strong>：客户端发送一个FIN，用来关闭客户端到服务器的数据传送，客户端进入<code>FIN_WAIT_1</code>状态。</li> <li><strong>第二次挥手</strong>：服务器收到FIN后，发送一个ACK给客户端，确认序号为收到序号+1，服务器进入<code>CLOSE_WAIT</code>状态。</li> <li><strong>第三次挥手</strong>：服务器发送一个FIN，用来关闭服务器到客户端的数据传送，服务器进入<code>LAST_ACK</code>状态。</li> <li><strong>第四次挥手</strong>：客户端收到FIN后，客户端进入<code>TIME_WAIT</code>状态，接着发送一个ACK给服务器，确认序号为收到序号+1，服务器进入<code>CLOSED</code>状态。</li></ul> <h2 id="get-post"><a href="#get-post" class="header-anchor">#</a> GET &amp; POST</h2> <ul><li><strong>缓存</strong>：GET请求会被浏览器主动缓存，而POST不会，除非手动设置。</li> <li><strong>敏感数据</strong>：GET参数通过URL传递，POST则放在请求体（Request body）中，POST更适合传递敏感数据。</li> <li><strong>编码</strong>：GET请求只能进行url编码，POST支持多种编码方式。</li> <li><strong>数据大小</strong>：GET是通过浏览器URL发送请求，而URL是有长度限制的，POST理论上没有大小限制，实际取决于服务器的设置。</li></ul> <h2 id="http缓存"><a href="#http缓存" class="header-anchor">#</a> HTTP缓存</h2> <p>简述，当浏览器再次访问一个已经访问过的资源时，它会这样做：</p> <ul><li><p>根据相关字段判断是否命中强缓存，如果命中，就直接使用缓存了。</p> <blockquote><p>相关字段指的是<strong>过期值</strong>，HTTP/1.0是根据<code>Expires</code>这个字段，HTTP/1.1是根据<code>Cache-Control</code>字段的<code>max-age</code>值。为了兼容，通常两个字段都会返回。</p></blockquote> <blockquote><p>使用上一次记录的<code>max-age</code>+<code>Date</code>（HTTP/1.0使用<code>Expires</code>），得到一个过期时间，比较这个<strong>过期时间</strong>是否大于<strong>当前时间</strong>，如果是，则表示缓存还没有过期，仍然有效，否则表示缓存失效。</p></blockquote></li> <li><p>如果没有命中强缓存，就发请求到服务器检查是否命中协商缓存。</p> <blockquote><p>该请求是携带着缓存去请求的，也就是携带<code>If-Modified-Since</code>和<code>If-None-Match</code>这两个字段去的。</p></blockquote></li> <li><p>如果命中协商缓存，服务器会返回 304 告诉浏览器使用本地缓存，否则，返回最新的资源。</p> <blockquote><p>如果缓存有效，服务器会返回一个304重定向，并且带上新的缓存指令，浏览器继续<strong>读取缓存数据</strong>，并更新缓存时间。</p></blockquote> <blockquote><p>如果缓存无效，服务器会返回正常的200响应，并且带上新的缓存指令，浏览器读取<strong>响应的数据</strong>，并更新缓存时间。</p></blockquote></li></ul> <h2 id="常见性能优化手段"><a href="#常见性能优化手段" class="header-anchor">#</a> 常见性能优化手段</h2> <h3 id="图片"><a href="#图片" class="header-anchor">#</a> 图片</h3> <ul><li>精灵图（雪碧图）。</li> <li>使用字体图标代替小图片。</li> <li>图片懒加载。</li></ul> <h3 id="css"><a href="#css" class="header-anchor">#</a> CSS</h3> <ul><li>将CSS样式表放在页面顶部，避免已经呈现的节点会根据新的样式重绘。</li> <li>避免使用层级较深的选择器，提供CSS渲染效率。</li> <li>避免使用<code>calc</code>等CSS表达式，它会在页面缩放、滚动时都会重新进行计算。</li> <li>能使用CSS实现的效果，尽量不使用JS来实现。</li></ul> <h3 id="js"><a href="#js" class="header-anchor">#</a> JS</h3> <ul><li>将JS脚本放到页面底部，避免堵塞DOM的渲染。或者在<code>script</code>标签上使用<code>defer</code>或<code>async</code>属性进行优化。
<blockquote><p>解析器遇到JS脚本会停止渲染，优先去加载或者执行JS脚本，处理完毕后再继续渲染。<br> <code>defer</code>属性：JS脚本的<code>加载</code>和DOM的渲染是并行的，JS脚本会等待DOM加载完才<code>执行</code>。<br> <code>async</code>属性：JS脚本的<code>加载</code>和<code>执行</code>和DOM的渲染是并行的，JS脚本一旦加载完<code>立即执行</code>。</p></blockquote></li> <li>减少DOM的操作，如果必要，请批量操作DOM，避免频繁回流。</li> <li>使用事件代理，避免为多个DOM元素绑定事件。</li> <li>使用节流、防抖，限制某个函数频繁触发。</li></ul> <h3 id="vue"><a href="#vue" class="header-anchor">#</a> Vue</h3> <ul><li>避免<code>v-if</code>和<code>v-for</code>在同一节点上使用，<code>v-for</code>的优先级比<code>v-if</code>高，造成每次循环都会<code>v-if</code>判断。
<blockquote><p>Vue3中已将 v-if 的优先级调高于 v-for。</p></blockquote></li> <li>给<code>v-for</code>的元素加上<code>key</code>标识，优化diff的效率。</li> <li>不需要响应式的数据使用<code>Object.freeze</code>冻结起来。</li> <li>合理使用<code>v-show</code>/<code>v-if</code>。
<blockquote><p><code>v-show</code>只是通过<code>display</code>控制元素的显隐。<code>v-if</code>会操作元素/组件的创建和销毁，代表生命周期会重新走一遍。</p></blockquote></li> <li>路由懒加载。</li> <li>函数式组件。</li> <li>善用<code>keep-alive</code>缓存组件。</li> <li>定时器和全局事件记得销毁。</li></ul> <h3 id="http"><a href="#http" class="header-anchor">#</a> HTTP</h3> <ul><li>资源压缩：HTML、CSS、JS、图片都可以压缩。</li> <li>并行连接：浏览器同时从一个域下载资源的数目有限，增加域可以提高并行下载量。</li> <li>使用CDN。</li> <li>使用HTTP缓存：添加<code>Expires</code>或者<code>Cache-Control</code>响应头。</li> <li>Gzip压缩。</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/Interview/vue.html" class="prev">
        Vue
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/blog/assets/js/app.685e9e67.js" defer></script><script src="/blog/assets/js/2.ea4cc169.js" defer></script><script src="/blog/assets/js/1.ef8e2f7a.js" defer></script><script src="/blog/assets/js/42.cfc2ab5e.js" defer></script>
  </body>
</html>
